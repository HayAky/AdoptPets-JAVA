<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mis Adopciones - AdoptPets</title>
    <link th:href="@{/css/footer.css}" rel="stylesheet">
    <link th:href="@{/css/header.css}" rel="stylesheet">
    <link th:href="@{/css/misadopt.css}" rel="stylesheet">

</head>
<body>
<div th:replace="~{fragments/header :: ~{header}}"></div>
<div class="layout">

    <main class="main-content">
        <div class="top-bar">
            <h1>Mis Solicitudes de Adopci贸n</h1>
            <form th:action="@{/logout}" method="post" style="display: inline;">
                <button type="submit" class="logout-btn">Cerrar Sesi贸n</button>
            </form>
        </div>

        <div th:if="${#lists.isEmpty(adopciones)}" class="empty-state">
            <div class="empty-state-icon"></div>
            <h3>A煤n no tienes solicitudes de adopci贸n</h3>
            <p>Explora nuestras mascotas disponibles y encuentra a tu compa帽ero perfecto</p>
            <a th:href="@{/adoptante/mascotas}" class="btn-primary">
                Ver Mascotas Disponibles
            </a>
        </div>

        <div th:unless="${#lists.isEmpty(adopciones)}">
            <div th:each="adopcion : ${adopciones}" class="adoption-card">
                <img th:src="@{${adopcion.mascota.fotos != null && !adopcion.mascota.fotos.isEmpty() ?
                                    adopcion.mascota.fotos[0].urlFoto : '/img/default-pet.jpg'}}"
                     th:alt="${adopcion.mascota.nombre}">

                <div class="adoption-info">
                    <h3 th:text="${adopcion.mascota.nombre}">Luna</h3>
                    <p><strong>Especie:</strong> <span th:text="${adopcion.mascota.especie}">Perro</span></p>
                    <p><strong>Raza:</strong> <span th:text="${adopcion.mascota.raza}">Mestizo</span></p>
                    <p><strong>Refugio:</strong> <span th:text="${adopcion.mascota.refugio?.nombreRefugio}">Refugio</span></p>
                    <p><strong>Fecha de solicitud:</strong>
                        <span th:text="${#temporals.format(adopcion.fechaSolicitud, 'dd/MM/yyyy')}">01/01/2024</span>
                    </p>
                    <p th:if="${adopcion.fechaAprobacion != null}">
                        <strong>Fecha de aprobaci贸n:</strong>
                        <span th:text="${#temporals.format(adopcion.fechaAprobacion, 'dd/MM/yyyy')}">01/01/2024</span>
                    </p>
                </div>

                <div class="adoption-actions">
                        <span class="badge"
                              th:classappend="${adopcion.estadoAdopcion.name() == 'PENDIENTE' ? 'badge-pending' :
                                             adopcion.estadoAdopcion.name() == 'APROBADA' ? 'badge-approved' :
                                             adopcion.estadoAdopcion.name() == 'COMPLETADA' ? 'badge-completed' : 'badge-rejected'}"
                              th:text="${adopcion.estadoAdopcion}">
                            PENDIENTE
                        </span>
                    <a th:href="@{/adoptante/adopciones/{id}(id=${adopcion.idAdopcion})}" class="btn-view">
                        Ver Detalles
                    </a>
                </div>
            </div>
        </div>
    </main>
</div>
<div th:replace="~{fragments/footer :: ~{footer}}"></div>
</body>
</html>