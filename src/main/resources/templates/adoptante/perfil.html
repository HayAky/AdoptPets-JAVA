<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Perfil - AdoptPets</title>
    <link th:href="@{/css/header.css}" rel="stylesheet">
    <link th:href="@{/css/footer.css}" rel="stylesheet">
    <link th:href="@{/css/perfil.css}" rel="stylesheet">
</head>
<body>
<div th:replace="~{fragments/header :: ~{header}}"></div>
<div class="layout">
    <main class="main-content">
        <div class="top-bar">
            <h1>Mi Perfil</h1>
            <form th:action="@{/logout}" method="post" style="display: inline;">
                <button type="submit" class="logout-btn">Cerrar SesiÃ³n</button>
            </form>
        </div>

        <div class="profile-container">
            <div class="profile-header">
                <div class="avatar" th:text="${usuario.nombre.substring(0,1).toUpperCase()}">U</div>
                <h2 th:text="${usuario.nombre + ' ' + usuario.apellido}">Nombre Usuario</h2>
                <p th:text="${usuario.email}">email@example.com</p>
            </div>

            <div th:if="${success}" class="alert alert-success" th:text="${success}">
                Perfil actualizado exitosamente
            </div>

            <form method="post" th:action="@{/adoptante/perfil/actualizar}" th:object="${usuario}">

                <div class="form-row">
                    <div class="form-group">
                        <label for="nombre">Nombre *</label>
                        <input type="text" id="nombre" th:field="*{nombre}" required>
                    </div>

                    <div class="form-group">
                        <label for="apellido">Apellido *</label>
                        <input type="text" id="apellido" th:field="*{apellido}" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="email">Email (no editable)</label>
                    <input type="email" id="email" th:value="${usuario.email}" disabled>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="telefono">TelÃ©fono</label>
                        <input type="text" id="telefono" th:field="*{telefono}">
                    </div>

                    <div class="form-group">
                        <label for="ciudad">Ciudad</label>
                        <input type="text" id="ciudad" th:field="*{ciudad}">
                    </div>
                </div>

                <div class="form-group">
                    <label for="direccion">DirecciÃ³n</label>
                    <input type="text" id="direccion" th:field="*{direccion}">
                </div>

                <div class="form-buttons">
                    <button type="submit" class="btn btn-primary">ðŸ’¾ Guardar Cambios</button>
                    <button type="button" class="btn btn-secondary" onclick="window.history.back()">
                        Cancelar
                    </button>
                </div>
            </form>

            <div class="info-box">
                <h3>ðŸ“‹ InformaciÃ³n de la Cuenta</h3>
                <p><strong>CÃ©dula:</strong> <span th:text="${usuario.cedula}">000000</span></p>
                <p><strong>Fecha de Nacimiento:</strong>
                    <span th:text="${#temporals.format(usuario.fechaNacimiento, 'dd/MM/yyyy')}">01/01/1990</span>
                </p>
                <p><strong>Miembro desde:</strong>
                    <span th:text="${#temporals.format(usuario.fechaRegistro, 'dd/MM/yyyy')}">01/01/2024</span>
                </p>
                <p><strong>Estado:</strong>
                    <span th:text="${usuario.activo ? 'Activo' : 'Inactivo'}"
                          style="color: #22C55E; font-weight: 600;">Activo</span>
                </p>
            </div>
        </div>
    </main>
</div>
<div th:replace="~{fragments/footer :: ~{footer}}"></div>
</body>
</html>